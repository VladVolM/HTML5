<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="../Estilos/Clase1.css">
		<title>Instalación de Docker</title>
	</head>
	<body>
		<header>
			<h3>Instalación de Docker</h3>
		</header>
		<section>
			<h3>Página de descarga</h3>
			<p>
				Usar url de descarga--> <a href="https://docs.docker.com/get-started/">https://docs.docker.com/get-started/</a><br>
				En la página, usar el menú en el lado izquierdo, ir a "Get Docker">"Docker Engine-Community">"Linux">"Ubuntu"(elegir el sistema que se usa)<br>
				El resto de la página fue sacada de las instrucciones de la página de descarga.
			</p>
		</section>
		<section>
			<h3>Instalación para Ubuntu</h3>
			<p>
				Tener en cuenta algunos prerrequisitos de tu sistema:<br>
				-Tener una instalación de 64 bits.<br>
				-Usar la distribución actualizada del Kernel
			</p>
		</section>
		<section>
			<h3>Borrar version antigua de Docker</h3>
			<p>
				En tu consola de comandos puedes usar "uname -r" para ver la versión(ej. 4.4.0-36-generic)
			</p>
				<ul>
					<li>$ sudo apt-get remove docker docker-engine docker.io containerd runc</li>
				</ul>

		</section>
		<section>
			<h3>Crear el repositorio</h3>
			<p>
				Hace falta hacer un update al "apt sources"
			</p>
				<ul>
					<li>$ sudo apt-get update</li>
				</ul>

			<p>
				Instalar paquetes que permiten usar repositorios a través de https:
			</p>
				<ul>
					<li>$ sudo apt-get install \
						<br>
						apt-transport-https \
						<br>
						ca-certificates \
						<br>
						curl \
						<br>
						gnupg-agent \
						<br>
						software-properties-common
					</li>
				</ul>

			<p>
				Añadir la llave oficial de Docker:
			</p>
			
				<ul>
					<li>
						$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
					</li>
				</ul>
			
			<p>
				Para comprobar la llave, que tiene que ser la siguiente se usa: (9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88)
			</p>
			
				<ul>
					<li>
						$ sudo apt-key fingerprint 0EBFCD88
					</li>
				</ul>
			<p>
				Que daría el siguiente resultado:<br>
				pub rsa4096 2017-02-22 [SCEA]<br>
				9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88<br>
				uid [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;<br>
				sub rsa4096 2017-02-22 [S]<br><br>
			
				Para preparar un estable repositorio se usaría:
			</p>

				<ul>
					<li>
						$ sudo add-apt-repository \
						<br>
						"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
						<br>
						$(lsb_release -cs) \
						<br>
						stable"
					</li>
				</ul>
			<p>
				Donde el código cambia según sistemas y distribuidor (usar la página web de descarga para más detalles)
			</p>
		</section>
		<section>
			<h3>Instalación</h3>
			<p>
				Tras haber preparado el repositorio se vuelve a usar
			</p>
				<ul>
					<li>
						$ sudo apt-get update
					</li>
				</ul>
			<p>
				Instalar la última versión de docker:
			</p>

				<ul>
					<li>
						$ sudo apt-get install docker-ce docker-ce-cli containerd.io
					</li>
				</ul>
			<p>
				Pero si quieres instalar una versión específica se usará
			</p>

				<ul>
					<li>
						$ apt-cache madison docker-ce
					</li>
				</ul>
			<p>
				Que daría algo como esto<br>
				docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages<br>
				docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages<br>
				etc.<br>
				Teniendo en cuenta el apartado de 5:18.09.1~3-0~ubuntu-xenial, se usaría el específico en el siguiente comando;
			</p>

				<ul>
					<li>
						$ sudo apt-get install docker-ce=&lt;STRING&gt; docker-ce-cli=&lt;STRING&gt; containerd.io
					</li>
				</ul>
			<p>
				Donde sustituyes STRING por la versión.<br>
				Para Finalizar se haran las siguientes compobaciones
			</p>

				<ul>
					<li>
						$ sudo docker run hello-world
					</li>
				</ul>
			<p>
				Si no da errores está preparado, (en la página web te indican apartados adicionales para descargar paquetes, y hacer update al Docker para futuro uso propio, fuera de esta clase)<br>
			</p>

				<ul>
					<li>
						$ service docker status
					</li>
					<li>
						$ systemctl status docker
					</li>
				</ul>
			<p>
				Se pueden usar para estar más seguro al ver su estado
			</p>
				<ul>
					<li>
						$ docker version
					</li>
				</ul>
			<p>
				Dará más datos sobre el Docker que usas.
			</p>
		</section>
		<footer>
			<a href="Clase2.html" target="1">Siguiente</a>
		</footer>
	</body>
</html>
